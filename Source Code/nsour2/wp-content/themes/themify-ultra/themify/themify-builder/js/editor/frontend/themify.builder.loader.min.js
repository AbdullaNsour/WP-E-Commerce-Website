((g,v,E)=>{'use strict';let $,n=!1;const e=()=>{let l;if($=jQuery,!v.wp||!wp.customize){let a=E.getElementsByClassName('themify_builder_content'),e=E.getElementsByClassName('toggle_tb_builder')[0],r=!1;l=!!e&&e.getElementsByClassName('tb_front_icon')[0].getAttribute('data-id');for(let n=a.length-1;-1<n;--n){let e=a[n].getAttribute('data-postid'),t=E.createElement('a'),i=E.createElement('span');e===l&&(r=!0),t.href='javascript:void(0);',t.className='tb_turn_on js-turn-on-builder',i.className='dashicons dashicons-edit',i.setAttribute('data-id',e),t.appendChild(i);const o=a[n].dataset.label||a[n].parentNode.dataset.label,s=E.createElement('span');s.innerHTML=o||tbLoaderVars.turnOnBuilder,t.appendChild(s),a[n].insertAdjacentElement(o?'beforeBegin':'afterEnd',t)}if(!e&&!(e=E.getElementsByClassName('js-turn-on-builder')[0])){const t=E.getElementsByClassName('dashicons-edit');l=t[0]?t[0].getAttribute('data-id'):null}e&&(!1===r?(l=null,e.classList.add('tb_disabled_turn_on')):e.classList.remove('tb_disabled_turn_on'))}let y=0<v.location.href.indexOf('?')?'&':'?';y=v.location.href.replace(v.location.hash,'').replace('#','')+y+'tb-preview=1&ver='+v.themify_vars.version,g.body.on('click.tb_loading','.toggle_tb_builder:not(.tb_disabled_turn_on) > a, a.js-turn-on-builder',function(e){e.preventDefault(),e.stopPropagation(),n=!0;const t=this.classList.contains('tb_restriction');if(g.LoadAsync(tbLocalScript.builder_url+'/js/editor/themify-ticks.js',()=>{t&&(TB_Ticks.init(tbLocalScript.ticks).show(),init())},null,null,()=>!!v.TB_Ticks),g.body.off('click.tb_loading'),!t){const d=this.classList.contains('js-turn-on-builder')?this.childNodes[0].getAttribute('data-id'):l;if(d&&!this.parentNode.classList.contains('tb_disabled_turn_on')){g.lazyDisable=g.lazyScrolling=!0,null!==g.observer&&g.observer.disconnect();let l,o=[],n=$(E).scrollTop(),s=g.convert(E.head.getElementsByTagName('link')).concat(g.convert(E.head.getElementsByTagName('style')));const c=g.body.children(),m=E.createElement('div'),i=E.createElement('div'),a=E.createElement('div'),r=E.createElement('div'),_=E.createElement('div'),b=E.createElement('iframe');if(m.className='tb_workspace_container',i.className='tb_vertical_bars',a.id='tb_left_bar',r.id='tb_right_bar',a.className=r.className='tb_middle_bar',_.className='tb_vertical_change_tooltip',b.className='tb_iframe',b.id=b.name='tb_iframe',b.scrolling=g.isTouch?'no':'yes',b.src=y+'&tb-id='+d,g.off('builder_load_module_partial'),$(E).off('ajaxComplete'),null!==tbLoaderVars.styles)for(let e in tbLoaderVars.styles)''!==tbLoaderVars.styles[e]&&(g.LoadCss(e,tbLoaderVars.styles[e]),o[e+'?ver='+tbLoaderVars.styles[e]]=1);l=E.createElement('div');const p=E.createElement('div'),u=E.createElement('div'),h=E.getElementsByClassName('tb_front_icon')[0];l.id='tb_alert',l.className='tb_busy',p.id='tb_fixed_bottom_scroll',p.className='tb_fixed_scroll',u.id='builder_progress',u.appendChild(E.createElement('div')),E.body.insertAdjacentElement('afterbegin',p),E.body.appendChild(l),h&&h.parentNode.appendChild(u),g.on('tb_load_iframe',()=>{i.appendChild(a),i.appendChild(b),i.appendChild(r),i.appendChild(_),m.appendChild(i),b.addEventListener('load',function(){const a=this.contentWindow;let r;g.on('themify_builder_ready',()=>{$(l).fadeOut(100,function(){this.classList.remove('tb_busy')});const e=g.body[0].classList.contains('archive');let t='themify_builder_active builder-breakpoint-desktop page-loaded';g.isTouch&&(t+=' tb_touch'),e&&(t+=' archive'),'1'===tbLoaderVars.isGlobalStylePost&&(t+=' gs_post'),g.body[0].className=t,g.body[0].removeAttribute('style'),m.style.display='block';const i=a.tb_app.Instances.Builder[0].$el.offset().top;i>n&&(n=i),a.scrollTo(0,n),g.iframe=b,g.is_builder_active=!0,setTimeout(()=>{c.hide();for(let i=s.length-1;-1<i;--i)if(s[i]&&s[i].parentNode){let e=s[i].href,t=s[i].id;e?o[e]&&'tf_base-css'!==s[i].id||-1!==e.indexOf('wp-includes')||-1!==e.indexOf('admin-bar')||(s[i].setAttribute('disabled',!0),s[i].parentNode.removeChild(s[i])):'tf_fonts_style'!==t&&'tf_lazy_common'!==t&&s[i].parentNode.removeChild(s[i])}s=o=tbLoaderVars=l=null,$('.themify_builder_content,#wpadminbar,header').remove(),c.filter('ul,a,video,audio').filter(':not(:has(link))').remove();const t=['scroll','tfsmartresize','debouncedresize','throttledresize','resize','mouseenter','keydown','keyup','mousedown','assignVideo'],i=$(v),n=$(E);for(let e=t.length-1;-1<e;--e)i.off(t[e]),n.off(t[e]),g.body.off(t[e]);E.documentElement.removeAttribute('style'),E.documentElement.removeAttribute('class');const e=a.tbLocalScript.ticks;e.postID=d,r.hasClass('tb_restriction')?setTimeout(()=>{E.body.appendChild(r.find('#tmpl-builder-restriction')[0]),TB_Ticks.init(e,a).show()},1e3):setTimeout(()=>{TB_Ticks.init(e,a).ticks()},5e3),setTimeout(()=>{const t=['ThemifyBuilderModuleJs','c','_wpemojiSettings','twemoji','themifyScript','tbLocalScript','tbScrollHighlight','google','ThemifyGallery','Animation','$f','Froogaloop','SliderProSlide','SliderProUtils','ThemifySlider','FixedHeader','LayoutAndFilter','WOW','Waypoint','$slidernav','google','Microsoft','Rellax','module$contents$MapsEvent_MapsEvent','module$contents$mapsapi$overlay$OverlayView_OverlayView','wc_add_to_cart_params','woocommerce_params','wc_cart_fragments_params','wc_single_product_params','tf_mobile_menu_trigger_point','themifyMobileMenuTrigger'];for(let e=t.length-1;-1<e;--e)v[t[e]]&&(v[t[e]]=null);g.events={},v.wp.emoji=null,v.ajaxurl=themify_vars.ajax_url,g.cssLazy=[];for(let e=a.document.querySelectorAll('[data-lazy]'),t=e.length-1;-1<t;--t)e[t].removeAttribute('data-lazy')},3e3)},800)});const e=()=>{a.themifyBuilder.post_ID=d,(r=a.jQuery('body')).trigger('builderiframeloaded.themify',this)};if('__rocketLoaderLoadProgressSimulator'in a){const t=setInterval(()=>{'complete'===a.__rocketLoaderLoadProgressSimulator.simulatedReadyState&&(clearInterval(t),e())},10)}else e()},{once:!0,passive:!0}),E.body.appendChild(m)},!0);{const f=new FormData;f.append('action','tb_load_editor'),g.fetch(f,'text').then(e=>{const t=E.createElement('div'),n={},a={},r=E.createDocumentFragment(),l=(E.createDocumentFragment(),g.body[0]),o=function(){n[this.src]=!0,$.ui&&$.fn.mouse&&$.fn.sortable&&g.trigger('tb_load_iframe');for(let e in a)if(!0!==n[e])return!1;const i=E.createDocumentFragment();for(let e=0,t=d.length;e<t;++e)i.appendChild(d[e]);l.appendChild(i),v.tinymce&&tinyMCE&&(tinyMCEPreInit.mceInit.tb_lb_hidden_editor.schema='html5',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.element_format='html',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.wp_autoresize_on=!1,tinyMCEPreInit.mceInit.tb_lb_hidden_editor.plugins='charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wpdialogs,wptextpattern,wpview,wplink',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.indent='simple',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.ie7_compat=!1,tinyMCEPreInit.mceInit.tb_lb_hidden_editor.root_name='div',tinyMCEPreInit.mceInit.tb_lb_hidden_editor.relative_urls=!0,tinyMCE.execCommand('mceRemoveEditor',!0,'tb_lb_hidden_editor'),$('#wp-tb_lb_hidden_editor-editor-container,#wp-tb_lb_hidden_editor-editor-tools').remove())},s=(t.innerHTML=e,t.querySelector('#tb_tinymce_wrap').children),d=[];for(let e=0,t=s.length;e<t;++e)if('SCRIPT'!==s[0].tagName||s[0].getAttribute('type')&&'text/javascript'!==s[0].getAttribute('type'))r.appendChild(s[0]);else{let i=E.createElement('script');for(let e=s[0].attributes,t=e.length-1;-1<t;--t)i.setAttribute(e[t].name,e[t].value);let e=s[0].getAttribute('src');if(e)void 0===a[e]&&-1===e.indexOf('themify/js/main')&&null===E.querySelector('script[src="'+e+'"]')&&(i.async=!1,a[e]=!0,i.addEventListener('load',o,{once:!0,passive:!0}),i.addEventListener('error',o,{once:!0,passive:!0}),r.appendChild(i));else{let e=s[0].id;if(!e||-1===e.indexOf('themify-main-script')){let e=s[0].innerHTML;-1===(i.innerHTML=e).indexOf('tinyMCEPreInit.')&&-1===e.indexOf('.addI18n')&&-1===e.indexOf('.i18n')&&-1===e.indexOf('wp.editor')?r.appendChild(i):d.push(i)}}s[0].remove()}try{l.appendChild(r)}catch(e){}})}}}}),g.body[0].classList.contains('tb_restriction')||-1!==v.location.href.indexOf('tb-id')||('#builder_active'===v.location.hash?($('.toggle_tb_builder > a').first().click(),v.location.hash=''):setTimeout(()=>{if(!1===n){const e=E.createElement('link');e.href=y+(l?'&tb-id='+l:''),e.rel='prefetch',e.setAttribute('as','doc'),E.head.appendChild(e)}},2e3))};!0===v.loaded?e():g.on('tf_init',e,!0)})(Themify,window,document);